<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Plane Detection AR (Lite)</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <script>
      // 탭하면 모델을 배치하는 컴포넌트
      AFFRAME.registerComponent('tap-to-place', {
        init: function () {
          var sceneEl = this.el.sceneEl;
          var reticleEl = document.querySelector('#reticle');

          sceneEl.addEventListener('ar-hit-test-select', function (evt) {
            // 외부 모델 대신 간단한 상자를 직접 생성합니다.
            var newModel = document.createElement('a-box');
            
            var position = reticleEl.getAttribute('position');
            newModel.setAttribute('position', position);
            newModel.setAttribute('scale', '0.2 0.2 0.2');
            newModel.setAttribute('color', 'tomato');
            
            sceneEl.appendChild(newModel);
          });
        }
      });
    </script>
  </head>
  <body style="margin: 0; overflow: hidden">
    <a-scene 
        webxr="requiredFeatures: hit-test" 
        tap-to-place 
        vr-mode-ui="enabled: false">

      <a-assets></a-assets>

      <a-camera></a-camera>
      
      <a-entity ar-hit-test="target: #reticle; type: ar;"></a-entity>
      <a-ring id="reticle" radius-inner="0.1" radius-outer="0.15" color="cyan" rotation="-90 0 0" visible="false"></a-ring>
    </a-scene>
  </body>
</html>