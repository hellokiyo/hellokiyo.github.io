<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8" />
    <title>Walkable AR Street</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <script src="https://aframe.io/releases/1.2.0/aframe.min.js"></script>
    <style>
      #ar-button {
        position: absolute; bottom: 20px; left: 50%;
        transform: translateX(-50%); padding: 12px 24px;
        border: 1px solid #fff; border-radius: 4px;
        background: rgba(0, 0, 0, 0.5); color: #fff;
        font-size: 16px; cursor: pointer; display: none;
      }
    </style>
  </head>
  <body style="margin: 0; overflow: hidden">

    <a-scene webxr vr-mode-ui="enabled: false">
      <a-assets>
        <img id="wood" src="https://raw.githubusercontent.com/aframevr/aframe/master/examples/boilerplate/panorama/wood.jpg">
      </a-assets>

      <a-camera position="0 1.6 0"></a-camera>

      <a-plane
        position="0 0 -10" rotation="-90 0 0"
        width="10" height="20" color="#888"
      ></a-plane>

      <a-box position="2 0.5 -5" width="2" height="3" depth="2" src="#wood"></a-box>
      <a-box position="2 0.5 -10" width="2" height="3" depth="2" src="#wood"></a-box>
      <a-box position="2 0.5 -15" width="2" height="3" depth="2" src="#wood"></a-box>

      <a-box position="-2 0.5 -5" width="2" height="3" depth="2" src="#wood"></a-box>
      <a-box position="-2 0.5 -10" width="2" height="3" depth="2" src="#wood"></a-box>
      <a-box position="-2 0.5 -15" width="2" height="3" depth="2" src="#wood"></a-box>

    </a-scene>

    <button id="ar-button">Enter AR</button>

    <script>
      // WebXR 지원 여부를 확인하고 'Enter AR' 버튼을 표시하는 로직
      document.addEventListener('DOMContentLoaded', function () {
        var arButton = document.getElementById('ar-button');
        var sceneEl = document.querySelector('a-scene');

        if (navigator.xr) {
          navigator.xr.isSessionSupported('immersive-ar').then((supported) => {
            if (supported) {
              arButton.style.display = 'block';
              arButton.addEventListener('click', function () {
                sceneEl.enterAR();
              });
            }
          });
        }
      });
    </script>
  </body>
</html>
